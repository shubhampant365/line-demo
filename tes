<template>
    <lightning-card title="Asset Onboarding" style="padding: 20px;">
        <div style="margin-bottom: 20px;">
            <lightning-input label="Product Name" value={productName} onchange={handleInputChange} data-id="productName" style="margin-left: 15px;"></lightning-input>
            <lightning-input label="Product Category" value={productCategory} onchange={handleInputChange} data-id="productCategory" style="margin-left: 15px;"></lightning-input>
            <lightning-input label="Product Subcategory" value={productSubCategory} onchange={handleInputChange} data-id="productSubCategory" style="margin-left: 15px;"></lightning-input>
            <lightning-input label="Product Code" value={productCode} onchange={handleInputChange} data-id="productCode" style="margin-left: 15px;"></lightning-input>
            <lightning-input label="Date of Purchase" type="date" value={dateOfPurchase} onchange={handleInputChange} data-id="dateOfPurchase" style="margin-left: 15px;"></lightning-input>
            <lightning-input label="Date of Installation" type="date" value={dateOfInstallation} onchange={handleInputChange} data-id="dateOfInstallation" style="margin-left: 15px;"></lightning-input>
            <lightning-input label="Sales Product Code" value={salesProductCode} onchange={handleInputChange} data-id="salesProductCode" style="margin-left: 15px;"></lightning-input>
            <lightning-input label="Invoice Number" value={invoiceNumber} onchange={handleInputChange} data-id="invoiceNumber" style="margin-left: 15px;"></lightning-input>
            <lightning-input label="Warranty Start Date" type="date" value={warrantyStartDate} onchange={handleInputChange} data-id="warrantyStartDate" style="margin-left: 15px;"></lightning-input>
            <lightning-input label="Warranty End Date" type="date" value={warrantyEndDate} onchange={handleInputChange} data-id="warrantyEndDate" style="margin-left: 15px;"></lightning-input>
            <lightning-input label="Source of Purchase" value={sourceOfPurchase} onchange={handleInputChange} data-id="sourceOfPurchase" style="margin-left: 15px;"></lightning-input>
            <lightning-textarea label="Remarks" value={remarks} onchange={handleInputChange} data-id="remarks" style="margin-left: 15px;"></lightning-textarea>
            <lightning-input type="checkbox" label="Rental Asset" checked={rentalAsset} onchange={handleCheckboxChange} data-id="rentalAsset" style="margin-left: 15px;"></lightning-input>
            <lightning-button label="Submit" onclick={handleSubmit} style="margin-top: 20px; margin-left: 15px;"></lightning-button>
        </div>
    </lightning-card>
</template>



import { LightningElement, track, api } from 'lwc';
import { ShowToastEvent } from 'lightning/platformShowToastEvent';
import submitAssetDetails from '@salesforce/apex/AssetOnboardingController.submitAssetDetails';

export default class AssetOnboardNoScan extends LightningElement {
    @api recordId;

    @track productName = '';
    @track productCategory = '';
    @track productSubCategory = '';
    @track productCode = '';
    @track dateOfPurchase = '';
    @track dateOfInstallation = '';
    @track salesProductCode = '';
    @track invoiceNumber = '';
    @track warrantyStartDate = '';
    @track warrantyEndDate = '';
    @track sourceOfPurchase = '';
    @track remarks = '';
    @track rentalAsset = false;

    handleInputChange(event) {
        const field = event.target.dataset.id;
        this[field] = event.target.value;
    }

    handleCheckboxChange(event) {
        this.rentalAsset = event.target.checked;
    }

    handleSubmit() {
        const assetDetails = {
            productName: this.productName,
            productCategory: this.productCategory,
            productSubCategory: this.productSubCategory,
            productCode: this.productCode,
            dateOfPurchase: this.dateOfPurchase,
            dateOfInstallation: this.dateOfInstallation,
            salesProductCode: this.salesProductCode,
            invoiceNumber: this.invoiceNumber,
            warrantyStartDate: this.warrantyStartDate,
            warrantyEndDate: this.warrantyEndDate,
            sourceOfPurchase: this.sourceOfPurchase,
            remarks: this.remarks,
            rentalAsset: this.rentalAsset,
            recordId: this.recordId
        };

        submitAssetDetails({ assetDetails })
            .then(() => {
                this.showToast('Success', 'Asset details submitted successfully', 'success');
            })
            .catch(error => {
                this.showToast('Error', error.body.message, 'error');
            });
    }

    showToast(title, message, variant) {
        const event = new ShowToastEvent({
            title: title,
            message: message,
            variant: variant
        });
        this.dispatchEvent(event);
    }
}



public with sharing class AssetOnboardingController {
    @AuraEnabled
    public static void submitAssetDetails(Map<String, Object> assetDetails) {
        // Process the asset details here
        // Example: create or update Asset records based on the received data

        // Extracting data from the map
        String productName = (String) assetDetails.get('productName');
        String productCategory = (String) assetDetails.get('productCategory');
        String productSubCategory = (String) assetDetails.get('productSubCategory');
        String productCode = (String) assetDetails.get('productCode');
        Date dateOfPurchase = Date.valueOf((String) assetDetails.get('dateOfPurchase'));
        Date dateOfInstallation = Date.valueOf((String) assetDetails.get('dateOfInstallation'));
        String salesProductCode = (String) assetDetails.get('salesProductCode');
        String invoiceNumber = (String) assetDetails.get('invoiceNumber');
        Date warrantyStartDate = Date.valueOf((String) assetDetails.get('warrantyStartDate'));
        Date warrantyEndDate = Date.valueOf((String) assetDetails.get('warrantyEndDate'));
        String sourceOfPurchase = (String) assetDetails.get('sourceOfPurchase');
        String remarks = (String) assetDetails.get('remarks');
        Boolean rentalAsset = (Boolean) assetDetails.get('rentalAsset');
        Id recordId = (Id) assetDetails.get('recordId');

        // Example logic to create an Asset record
        Asset newAsset = new Asset(
            Name = productName,
            Product_Category__c = productCategory,
            Product_Sub_Category__c = productSubCategory,
            ProductCode = productCode,
            Date_of_Purchase__c = dateOfPurchase,
            Date_of_Installation__c = dateOfInstallation,
            Sales_Product_Code__c = salesProductCode,
            Invoice_Number__c = invoiceNumber,
            Warranty_Start_Date__c = warrantyStartDate,
            Warranty_End_Date__c = warrantyEndDate,
            Source_of_Purchase__c = sourceOfPurchase,
            Remarks__c = remarks,
            Rental_Asset__c = rentalAsset
        );
        insert newAsset;
    }
}
